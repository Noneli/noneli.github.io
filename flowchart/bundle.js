var app=function(){"use strict";function t(){}function n(t){return t()}function e(){return Object.create(null)}function r(t){t.forEach(n)}function o(t){return"function"==typeof t}function i(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}function u(t,n){t.appendChild(n)}function a(t,n,e){t.insertBefore(n,e||null)}function s(t){t.parentNode.removeChild(t)}function l(t){return document.createElement(t)}function c(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function f(t){return document.createTextNode(t)}function h(){return f(" ")}function p(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}function d(t,n,e){t.setAttributeNS("http://www.w3.org/1999/xlink",n,e)}function g(t,n){n=""+n,t.wholeText!==n&&(t.data=n)}let y;function m(t){y=t}function v(t){(function(){if(!y)throw new Error("Function called outside component initialization");return y})().$$.on_mount.push(t)}const _=[],w=[],x=[],b=[],$=Promise.resolve();let A=!1;function E(t){x.push(t)}let N=!1;const S=new Set;function k(){if(!N){N=!0;do{for(let t=0;t<_.length;t+=1){const n=_[t];m(n),I(n.$$)}for(m(null),_.length=0;w.length;)w.pop()();for(let t=0;t<x.length;t+=1){const n=x[t];S.has(n)||(S.add(n),n())}x.length=0}while(_.length);for(;b.length;)b.pop()();A=!1,N=!1,S.clear()}}function I(t){if(null!==t.fragment){t.update(),r(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(E)}}const C=new Set;let M;function O(t,n){t&&t.i&&(C.delete(t),t.i(n))}function P(t,n,e,r){if(t&&t.o){if(C.has(t))return;C.add(t),M.c.push((()=>{C.delete(t),r&&(e&&t.d(1),r())})),t.o(n)}}function B(t){t&&t.c()}function T(t,e,i,u){const{fragment:a,on_mount:s,on_destroy:l,after_update:c}=t.$$;a&&a.m(e,i),u||E((()=>{const e=s.map(n).filter(o);l?l.push(...e):r(e),t.$$.on_mount=[]})),c.forEach(E)}function j(t,n){const e=t.$$;null!==e.fragment&&(r(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx=[])}function q(t,n){-1===t.$$.dirty[0]&&(_.push(t),A||(A=!0,$.then(k)),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}function L(n,o,i,u,a,l,c=[-1]){const f=y;m(n);const h=n.$$={fragment:null,ctx:null,props:l,update:t,not_equal:a,bound:e(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(f?f.$$.context:o.context||[]),callbacks:e(),dirty:c,skip_bound:!1};let p=!1;if(h.ctx=i?i(n,o.props||{},((t,e,...r)=>{const o=r.length?r[0]:e;return h.ctx&&a(h.ctx[t],h.ctx[t]=o)&&(!h.skip_bound&&h.bound[t]&&h.bound[t](o),p&&q(n,t)),e})):[],h.update(),p=!0,r(h.before_update),h.fragment=!!u&&u(h.ctx),o.target){if(o.hydrate){const t=function(t){return Array.from(t.childNodes)}(o.target);h.fragment&&h.fragment.l(t),t.forEach(s)}else h.fragment&&h.fragment.c();o.intro&&O(n.$$.fragment),T(n,o.target,o.anchor,o.customElement),k()}m(f)}class z{$destroy(){j(this,1),this.$destroy=t}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(t){var n;this.$$set&&(n=t,0!==Object.keys(n).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}var D="http://www.w3.org/1999/xhtml",V={svg:"http://www.w3.org/2000/svg",xhtml:D,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function H(t){var n=t+="",e=n.indexOf(":");return e>=0&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),V.hasOwnProperty(n)?{space:V[n],local:t}:t}function R(t){return function(){var n=this.ownerDocument,e=this.namespaceURI;return e===D&&n.documentElement.namespaceURI===D?n.createElement(t):n.createElementNS(e,t)}}function U(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function X(t){var n=H(t);return(n.local?U:R)(n)}function Y(){}function G(t){return null==t?Y:function(){return this.querySelector(t)}}function F(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function K(){return[]}function J(t){return function(n){return n.matches(t)}}var Q=Array.prototype.find;function W(){return this.firstElementChild}var Z=Array.prototype.filter;function tt(){return this.children}function nt(t){return new Array(t.length)}function et(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}function rt(t){return function(){return t}}function ot(t,n,e,r,o,i){for(var u,a=0,s=n.length,l=i.length;a<l;++a)(u=n[a])?(u.__data__=i[a],r[a]=u):e[a]=new et(t,i[a]);for(;a<s;++a)(u=n[a])&&(o[a]=u)}function it(t,n,e,r,o,i,u){var a,s,l,c=new Map,f=n.length,h=i.length,p=new Array(f);for(a=0;a<f;++a)(s=n[a])&&(p[a]=l=u.call(s,s.__data__,a,n)+"",c.has(l)?o[a]=s:c.set(l,s));for(a=0;a<h;++a)l=u.call(t,i[a],a,i)+"",(s=c.get(l))?(r[a]=s,s.__data__=i[a],c.delete(l)):e[a]=new et(t,i[a]);for(a=0;a<f;++a)(s=n[a])&&c.get(p[a])===s&&(o[a]=s)}function ut(t){return t.__data__}function at(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function st(t){return function(){this.removeAttribute(t)}}function lt(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ct(t,n){return function(){this.setAttribute(t,n)}}function ft(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}function ht(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}}function pt(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}function dt(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function gt(t){return function(){this.style.removeProperty(t)}}function yt(t,n,e){return function(){this.style.setProperty(t,n,e)}}function mt(t,n,e){return function(){var r=n.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,e)}}function vt(t,n){return t.style.getPropertyValue(n)||dt(t).getComputedStyle(t,null).getPropertyValue(n)}function _t(t){return function(){delete this[t]}}function wt(t,n){return function(){this[t]=n}}function xt(t,n){return function(){var e=n.apply(this,arguments);null==e?delete this[t]:this[t]=e}}function bt(t){return t.trim().split(/^|\s+/)}function $t(t){return t.classList||new At(t)}function At(t){this._node=t,this._names=bt(t.getAttribute("class")||"")}function Et(t,n){for(var e=$t(t),r=-1,o=n.length;++r<o;)e.add(n[r])}function Nt(t,n){for(var e=$t(t),r=-1,o=n.length;++r<o;)e.remove(n[r])}function St(t){return function(){Et(this,t)}}function kt(t){return function(){Nt(this,t)}}function It(t,n){return function(){(n.apply(this,arguments)?Et:Nt)(this,t)}}function Ct(){this.textContent=""}function Mt(t){return function(){this.textContent=t}}function Ot(t){return function(){var n=t.apply(this,arguments);this.textContent=null==n?"":n}}function Pt(){this.innerHTML=""}function Bt(t){return function(){this.innerHTML=t}}function Tt(t){return function(){var n=t.apply(this,arguments);this.innerHTML=null==n?"":n}}function jt(){this.nextSibling&&this.parentNode.appendChild(this)}function qt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Lt(){return null}function zt(){var t=this.parentNode;t&&t.removeChild(this)}function Dt(){var t=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function Vt(){var t=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function Ht(t){return t.trim().split(/^|\s+/).map((function(t){var n="",e=t.indexOf(".");return e>=0&&(n=t.slice(e+1),t=t.slice(0,e)),{type:t,name:n}}))}function Rt(t){return function(){var n=this.__on;if(n){for(var e,r=0,o=-1,i=n.length;r<i;++r)e=n[r],t.type&&e.type!==t.type||e.name!==t.name?n[++o]=e:this.removeEventListener(e.type,e.listener,e.options);++o?n.length=o:delete this.__on}}}function Ut(t,n,e){return function(){var r,o=this.__on,i=function(t){return function(n){t.call(this,n,this.__data__)}}(n);if(o)for(var u=0,a=o.length;u<a;++u)if((r=o[u]).type===t.type&&r.name===t.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=i,r.options=e),void(r.value=n);this.addEventListener(t.type,i,e),r={type:t.type,name:t.name,value:n,listener:i,options:e},o?o.push(r):this.__on=[r]}}function Xt(t,n,e){var r=dt(t),o=r.CustomEvent;"function"==typeof o?o=new o(n,e):(o=r.document.createEvent("Event"),e?(o.initEvent(n,e.bubbles,e.cancelable),o.detail=e.detail):o.initEvent(n,!1,!1)),t.dispatchEvent(o)}function Yt(t,n){return function(){return Xt(this,t,n)}}function Gt(t,n){return function(){return Xt(this,t,n.apply(this,arguments))}}et.prototype={constructor:et,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},At.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var Ft=[null];function Kt(t,n){this._groups=t,this._parents=n}function Jt(t){return"string"==typeof t?new Kt([[document.querySelector(t)]],[document.documentElement]):new Kt([[t]],Ft)}function Qt(t,n){if(t=function(t){let n;for(;n=t.sourceEvent;)t=n;return t}(t),void 0===n&&(n=t.currentTarget),n){var e=n.ownerSVGElement||n;if(e.createSVGPoint){var r=e.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,[(r=r.matrixTransform(n.getScreenCTM().inverse())).x,r.y]}if(n.getBoundingClientRect){var o=n.getBoundingClientRect();return[t.clientX-o.left-n.clientLeft,t.clientY-o.top-n.clientTop]}}return[t.pageX,t.pageY]}Kt.prototype={constructor:Kt,select:function(t){"function"!=typeof t&&(t=G(t));for(var n=this._groups,e=n.length,r=new Array(e),o=0;o<e;++o)for(var i,u,a=n[o],s=a.length,l=r[o]=new Array(s),c=0;c<s;++c)(i=a[c])&&(u=t.call(i,i.__data__,c,a))&&("__data__"in i&&(u.__data__=i.__data__),l[c]=u);return new Kt(r,this._parents)},selectAll:function(t){t="function"==typeof t?function(t){return function(){var n=t.apply(this,arguments);return null==n?[]:F(n)}}(t):function(t){return null==t?K:function(){return this.querySelectorAll(t)}}(t);for(var n=this._groups,e=n.length,r=[],o=[],i=0;i<e;++i)for(var u,a=n[i],s=a.length,l=0;l<s;++l)(u=a[l])&&(r.push(t.call(u,u.__data__,l,a)),o.push(u));return new Kt(r,o)},selectChild:function(t){return this.select(null==t?W:function(t){return function(){return Q.call(this.children,t)}}("function"==typeof t?t:J(t)))},selectChildren:function(t){return this.selectAll(null==t?tt:function(t){return function(){return Z.call(this.children,t)}}("function"==typeof t?t:J(t)))},filter:function(t){"function"!=typeof t&&(t=function(t){return function(){return this.matches(t)}}(t));for(var n=this._groups,e=n.length,r=new Array(e),o=0;o<e;++o)for(var i,u=n[o],a=u.length,s=r[o]=[],l=0;l<a;++l)(i=u[l])&&t.call(i,i.__data__,l,u)&&s.push(i);return new Kt(r,this._parents)},data:function(t,n){if(!arguments.length)return Array.from(this,ut);var e=n?it:ot,r=this._parents,o=this._groups;"function"!=typeof t&&(t=rt(t));for(var i=o.length,u=new Array(i),a=new Array(i),s=new Array(i),l=0;l<i;++l){var c=r[l],f=o[l],h=f.length,p=F(t.call(c,c&&c.__data__,l,r)),d=p.length,g=a[l]=new Array(d),y=u[l]=new Array(d),m=s[l]=new Array(h);e(c,f,g,y,m,p,n);for(var v,_,w=0,x=0;w<d;++w)if(v=g[w]){for(w>=x&&(x=w+1);!(_=y[x])&&++x<d;);v._next=_||null}}return(u=new Kt(u,r))._enter=a,u._exit=s,u},enter:function(){return new Kt(this._enter||this._groups.map(nt),this._parents)},exit:function(){return new Kt(this._exit||this._groups.map(nt),this._parents)},join:function(t,n,e){var r=this.enter(),o=this,i=this.exit();return r="function"==typeof t?t(r):r.append(t+""),null!=n&&(o=n(o)),null==e?i.remove():e(i),r&&o?r.merge(o).order():o},merge:function(t){if(!(t instanceof Kt))throw new Error("invalid merge");for(var n=this._groups,e=t._groups,r=n.length,o=e.length,i=Math.min(r,o),u=new Array(r),a=0;a<i;++a)for(var s,l=n[a],c=e[a],f=l.length,h=u[a]=new Array(f),p=0;p<f;++p)(s=l[p]||c[p])&&(h[p]=s);for(;a<r;++a)u[a]=n[a];return new Kt(u,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,n=-1,e=t.length;++n<e;)for(var r,o=t[n],i=o.length-1,u=o[i];--i>=0;)(r=o[i])&&(u&&4^r.compareDocumentPosition(u)&&u.parentNode.insertBefore(r,u),u=r);return this},sort:function(t){function n(n,e){return n&&e?t(n.__data__,e.__data__):!n-!e}t||(t=at);for(var e=this._groups,r=e.length,o=new Array(r),i=0;i<r;++i){for(var u,a=e[i],s=a.length,l=o[i]=new Array(s),c=0;c<s;++c)(u=a[c])&&(l[c]=u);l.sort(n)}return new Kt(o,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],o=0,i=r.length;o<i;++o){var u=r[o];if(u)return u}return null},size:function(){let t=0;for(const n of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var o,i=n[e],u=0,a=i.length;u<a;++u)(o=i[u])&&t.call(o,o.__data__,u,i);return this},attr:function(t,n){var e=H(t);if(arguments.length<2){var r=this.node();return e.local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}return this.each((null==n?e.local?lt:st:"function"==typeof n?e.local?pt:ht:e.local?ft:ct)(e,n))},style:function(t,n,e){return arguments.length>1?this.each((null==n?gt:"function"==typeof n?mt:yt)(t,n,null==e?"":e)):vt(this.node(),t)},property:function(t,n){return arguments.length>1?this.each((null==n?_t:"function"==typeof n?xt:wt)(t,n)):this.node()[t]},classed:function(t,n){var e=bt(t+"");if(arguments.length<2){for(var r=$t(this.node()),o=-1,i=e.length;++o<i;)if(!r.contains(e[o]))return!1;return!0}return this.each(("function"==typeof n?It:n?St:kt)(e,n))},text:function(t){return arguments.length?this.each(null==t?Ct:("function"==typeof t?Ot:Mt)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?Pt:("function"==typeof t?Tt:Bt)(t)):this.node().innerHTML},raise:function(){return this.each(jt)},lower:function(){return this.each(qt)},append:function(t){var n="function"==typeof t?t:X(t);return this.select((function(){return this.appendChild(n.apply(this,arguments))}))},insert:function(t,n){var e="function"==typeof t?t:X(t),r=null==n?Lt:"function"==typeof n?n:G(n);return this.select((function(){return this.insertBefore(e.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(zt)},clone:function(t){return this.select(t?Vt:Dt)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,n,e){var r,o,i=Ht(t+""),u=i.length;if(!(arguments.length<2)){for(a=n?Ut:Rt,r=0;r<u;++r)this.each(a(i[r],n,e));return this}var a=this.node().__on;if(a)for(var s,l=0,c=a.length;l<c;++l)for(r=0,s=a[l];r<u;++r)if((o=i[r]).type===s.type&&o.name===s.name)return s.value},dispatch:function(t,n){return this.each(("function"==typeof n?Gt:Yt)(t,n))},[Symbol.iterator]:function*(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r,o=t[n],i=0,u=o.length;i<u;++i)(r=o[i])&&(yield r)}};var Wt={value:()=>{}};function Zt(){for(var t,n=0,e=arguments.length,r={};n<e;++n){if(!(t=arguments[n]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new tn(r)}function tn(t){this._=t}function nn(t,n){return t.trim().split(/^|\s+/).map((function(t){var e="",r=t.indexOf(".");if(r>=0&&(e=t.slice(r+1),t=t.slice(0,r)),t&&!n.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}}))}function en(t,n){for(var e,r=0,o=t.length;r<o;++r)if((e=t[r]).name===n)return e.value}function rn(t,n,e){for(var r=0,o=t.length;r<o;++r)if(t[r].name===n){t[r]=Wt,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=e&&t.push({name:n,value:e}),t}function on(t){t.stopImmediatePropagation()}function un(t){t.preventDefault(),t.stopImmediatePropagation()}tn.prototype=Zt.prototype={constructor:tn,on:function(t,n){var e,r=this._,o=nn(t+"",r),i=-1,u=o.length;if(!(arguments.length<2)){if(null!=n&&"function"!=typeof n)throw new Error("invalid callback: "+n);for(;++i<u;)if(e=(t=o[i]).type)r[e]=rn(r[e],t.name,n);else if(null==n)for(e in r)r[e]=rn(r[e],t.name,null);return this}for(;++i<u;)if((e=(t=o[i]).type)&&(e=en(r[e],t.name)))return e},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new tn(t)},call:function(t,n){if((e=arguments.length-2)>0)for(var e,r,o=new Array(e),i=0;i<e;++i)o[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(i=0,e=(r=this._[t]).length;i<e;++i)r[i].value.apply(n,o)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],o=0,i=r.length;o<i;++o)r[o].value.apply(n,e)}};var an=t=>()=>t;function sn(t,{sourceEvent:n,subject:e,target:r,identifier:o,active:i,x:u,y:a,dx:s,dy:l,dispatch:c}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},subject:{value:e,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:u,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:s,enumerable:!0,configurable:!0},dy:{value:l,enumerable:!0,configurable:!0},_:{value:c}})}function ln(t){return!t.ctrlKey&&!t.button}function cn(){return this.parentNode}function fn(t,n){return null==n?{x:t.x,y:t.y}:n}function hn(){return navigator.maxTouchPoints||"ontouchstart"in this}function pn(){var t,n,e,r,o=ln,i=cn,u=fn,a=hn,s={},l=Zt("start","drag","end"),c=0,f=0;function h(t){t.on("mousedown.drag",p).filter(a).on("touchstart.drag",y).on("touchmove.drag",m).on("touchend.drag touchcancel.drag",v).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(u,a){if(!r&&o.call(this,u,a)){var s=_(this,i.call(this,u,a),u,a,"mouse");s&&(Jt(u.view).on("mousemove.drag",d,!0).on("mouseup.drag",g,!0),function(t){var n=t.document.documentElement,e=Jt(t).on("dragstart.drag",un,!0);"onselectstart"in n?e.on("selectstart.drag",un,!0):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}(u.view),on(u),e=!1,t=u.clientX,n=u.clientY,s("start",u))}}function d(r){if(un(r),!e){var o=r.clientX-t,i=r.clientY-n;e=o*o+i*i>f}s.mouse("drag",r)}function g(t){Jt(t.view).on("mousemove.drag mouseup.drag",null),function(t,n){var e=t.document.documentElement,r=Jt(t).on("dragstart.drag",null);n&&(r.on("click.drag",un,!0),setTimeout((function(){r.on("click.drag",null)}),0)),"onselectstart"in e?r.on("selectstart.drag",null):(e.style.MozUserSelect=e.__noselect,delete e.__noselect)}(t.view,e),un(t),s.mouse("end",t)}function y(t,n){if(o.call(this,t,n)){var e,r,u=t.changedTouches,a=i.call(this,t,n),s=u.length;for(e=0;e<s;++e)(r=_(this,a,t,n,u[e].identifier,u[e]))&&(on(t),r("start",t,u[e]))}}function m(t){var n,e,r=t.changedTouches,o=r.length;for(n=0;n<o;++n)(e=s[r[n].identifier])&&(un(t),e("drag",t,r[n]))}function v(t){var n,e,o=t.changedTouches,i=o.length;for(r&&clearTimeout(r),r=setTimeout((function(){r=null}),500),n=0;n<i;++n)(e=s[o[n].identifier])&&(on(t),e("end",t,o[n]))}function _(t,n,e,r,o,i){var a,f,p,d=l.copy(),g=Qt(i||e,n);if(null!=(p=u.call(t,new sn("beforestart",{sourceEvent:e,target:h,identifier:o,active:c,x:g[0],y:g[1],dx:0,dy:0,dispatch:d}),r)))return a=p.x-g[0]||0,f=p.y-g[1]||0,function e(i,u,l){var y,m=g;switch(i){case"start":s[o]=e,y=c++;break;case"end":delete s[o],--c;case"drag":g=Qt(l||u,n),y=c}d.call(i,t,new sn(i,{sourceEvent:u,subject:p,target:h,identifier:o,active:y,x:g[0]+a,y:g[1]+f,dx:g[0]-m[0],dy:g[1]-m[1],dispatch:d}),r)}}return h.filter=function(t){return arguments.length?(o="function"==typeof t?t:an(!!t),h):o},h.container=function(t){return arguments.length?(i="function"==typeof t?t:an(t),h):i},h.subject=function(t){return arguments.length?(u="function"==typeof t?t:an(t),h):u},h.touchable=function(t){return arguments.length?(a="function"==typeof t?t:an(!!t),h):a},h.on=function(){var t=l.on.apply(l,arguments);return t===l?h:t},h.clickDistance=function(t){return arguments.length?(f=(t=+t)*t,h):Math.sqrt(f)},h}function dn(n){let e,r,o,i,l,h,y,m,v,_,w;return{c(){e=c("svg"),r=c("symbol"),o=c("path"),i=c("symbol"),l=c("path"),h=c("symbol"),y=c("path"),m=c("g"),v=c("title"),_=f(n[2]),w=c("use"),p(o,"d","M512 998.4C243.776 998.4 25.6 780.224 25.6 512S243.776 25.6 512 25.6s486.4 218.176 486.4 486.4-218.176 486.4-486.4 486.4zM512 76.8C272 76.8 76.8 272 76.8 512s195.2 435.2 435.2 435.2 435.2-195.2 435.2-435.2S752 76.8 512 76.8z"),p(r,"id","ellipse-i"),p(r,"viewBox","0 0 1024 1024"),p(l,"d","M832 928H192c-52.928 0-96-43.072-96-96V192c0-52.928 43.072-96 96-96h640c52.928 0 96 43.072 96 96v640c0 52.928-43.072 96-96 96zM192 160c-17.632 0-32 14.368-32 32v640c0 17.664 14.368 32 32 32h640c17.664 0 32-14.336 32-32V192c0-17.632-14.336-32-32-32H192z"),p(i,"id","square-i"),p(i,"viewBox","0 0 1024 1024"),p(y,"d","M511.9233084 148.91700253l363.00630586 363.00630587-363.00630586 363.00630586-363.00630587-363.00630586 363.00630586-363.00630586m1e-8-86.91700254l-449.9233084 449.92330839 449.9233084 449.92330841 449.9233084-449.92330841-449.92330841-449.92330839z"),p(h,"id","rhombus-i"),p(h,"viewBox","0 0 1024 1024"),d(w,"xlink:href",n[3]),p(w,"x","0"),p(w,"y","0"),p(w,"width",n[0]),p(w,"height",n[1]),p(w,"fill","#2f54cd"),p(e,"class","icon-wrapper svelte-s6ip6q"),p(e,"width",n[0]),p(e,"height",n[1])},m(t,n){a(t,e,n),u(e,r),u(r,o),u(e,i),u(i,l),u(e,h),u(h,y),u(e,m),u(m,v),u(v,_),u(m,w)},p(t,[n]){4&n&&g(_,t[2]),8&n&&d(w,"xlink:href",t[3]),1&n&&p(w,"width",t[0]),2&n&&p(w,"height",t[1]),1&n&&p(e,"width",t[0]),2&n&&p(e,"height",t[1])},i:t,o:t,d(t){t&&s(e)}}}function gn(t,n,e){let r,{width:o=40}=n,{height:i=40}=n,{id:u="square"}=n;return t.$$set=t=>{"width"in t&&e(0,o=t.width),"height"in t&&e(1,i=t.height),"id"in t&&e(2,u=t.id)},t.$$.update=()=>{4&t.$$.dirty&&e(3,r=`#${u}-i`)},[o,i,u,r]}sn.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};class yn extends z{constructor(t){super(),L(this,t,gn,dn,i,{width:0,height:1,id:2})}}function mn(t,n){return Object.entries(n).forEach((([n,e])=>{t.attr(n,e)})),t}function vn(t,n,e){const r=t.slice();return r[10]=n[e],r[12]=e,r}function _n(n){let e,r;return e=new yn({props:{id:n[10].type,title:n[10].type}}),{c(){B(e.$$.fragment)},m(t,n){T(e,t,n),r=!0},p:t,i(t){r||(O(e.$$.fragment,t),r=!0)},o(t){P(e.$$.fragment,t),r=!1},d(t){j(e,t)}}}function wn(t){let n,e,o,i,c,f=t[0],d=[];for(let n=0;n<f.length;n+=1)d[n]=_n(vn(t,f,n));const g=t=>P(d[t],1,1,(()=>{d[t]=null}));return{c(){n=l("main"),e=l("section");for(let t=0;t<d.length;t+=1)d[t].c();o=h(),i=l("section"),i.innerHTML='<svg id="flow-svg" xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 1100 700"></svg>',p(e,"class","left svelte-hqy45a"),p(i,"class","right svelte-hqy45a"),p(n,"class","flow-wrapper svelte-hqy45a")},m(t,r){a(t,n,r),u(n,e);for(let t=0;t<d.length;t+=1)d[t].m(e,null);u(n,o),u(n,i),c=!0},p(t,[n]){if(1&n){let o;for(f=t[0],o=0;o<f.length;o+=1){const r=vn(t,f,o);d[o]?(d[o].p(r,n),O(d[o],1)):(d[o]=_n(r),d[o].c(),O(d[o],1),d[o].m(e,null))}for(M={r:0,c:[],p:M},o=f.length;o<d.length;o+=1)g(o);M.r||r(M.c),M=M.p}},i(t){if(!c){for(let t=0;t<f.length;t+=1)O(d[t]);c=!0}},o(t){d=d.filter(Boolean);for(let t=0;t<d.length;t+=1)P(d[t]);c=!1},d(t){t&&s(n),function(t,n){for(let e=0;e<t.length;e+=1)t[e]&&t[e].d(n)}(d,t)}}}function xn(){return{sx:window.scrollX,sy:window.scrollY}}function bn(t,n){let{sx:e,sy:r}=xn();const{pos:o,offset:i,width:u,height:a}=n,s={x:o.x+i.x-e,y:o.y+i.y-r};return"top"===t?s.y-=a/2:"bottom"===t?s.y+=a/2:"left"===t?s.x-=u/2:"right"===t&&(s.x+=u/2),s}function $n(t,n){const e=(n.y-t.y)/2;let r="a3 3,0,0,0,3 3",o="a3,3 0 0 1 3,3",i=3,u=3;return Math.abs(n.x-t.x)<8?(r="",o="",i=0,u=0):n.x<t.x&&(r="a3 3,0,0,1,-3 3",o="a3,3 0 0 0 -3,3",u=-3,i=3),`M${t.x},${t.y}v${e-i}${r}h${n.x-t.x-2*u}${o}v${e-i-1}l3,-3m-6,0l3,3`}function An(t,n,e){let r=n.x-t.x,o=3,i="a3 3,0,0,1,3 3",u="a3,3 0 0 1 -3,3",a="m3,3l-3,-3l3,-3";return e>0?r=e>r?e:r+20:(o=-3,i="a3 3,0,0,0,-3 3",u="a3,3 0 0 0 3,3",a="m-3,-3l3,3l-3,3",r=e<r?e:r-20),`M${t.x},${t.y}h${r-o}${i}v${n.y-t.y-6}${u}h${n.x-t.x-r+o}${a}`}function En(t){const n=[{type:"square",width:100,height:60,data:{}},{type:"ellipse",width:100,height:60,data:{}},{type:"rhombus",width:100,height:60,data:{}}],e=[];let r={};function o(t){return e.find((n=>n.nodeId===t))||{}}function i(t,n){const e=t.append("span").classed("link-point-top",!0),i=t.append("span").classed("link-point-bottom",!0),u=t.append("span").classed("link-point-left",!0),a=t.append("span").classed("link-point-right",!0);mn(e,{name:"top","node-id":n.nodeId}),mn(i,{name:"bottom","node-id":n.nodeId}),mn(u,{name:"left","node-id":n.nodeId}),mn(a,{name:"right","node-id":n.nodeId}),function(t,n){const e=Jt(".flow-wrapper>.right"),{top:i,left:u}=e.node().getBoundingClientRect(),{sx:a,sy:s}=xn();t.forEach((t=>{let l=t.attr("name");"top"!==l&&t.call(pn().on("drag",(t=>{r.end={x:t.x-u-a,y:t.y-i-s};const{begin:n,end:e,target:o,hOffset:c}=r,f=["left","right"].includes(l)?An:$n;o&&o.attr("d",f(n,e,c))})).on("start",(()=>{r.hOffset="left"===l?-30:30,r.fromNodeId=t.attr("node-id"),r.beginPosName=l,r.begin=bn(l,n),r.target=Jt("#flow-svg").append("path"),mn(r.target,{stroke:"#b9bdc4","stroke-width":2,fill:"none"})})).on("end",(()=>{const{toNodeId:t,target:n}=r;t||n&&n.remove(),Object.assign(r,{fromNodeId:null,target:null,toNodeId:null})})).container((()=>e))),"bottom"!==l&&t.on("mouseenter",(t=>{const e=Jt(t.target),i=e.attr("node-id"),u=e.attr("name");if(!r.fromNodeId||i===r.fromNodeId)return;if(!((a=r.beginPosName)===(s=u)&&["left","right"].includes(a)||"bottom"===a&&"top"===s))return;var a,s;const l=o(r.fromNodeId);r.toNodeId=i,r.end=bn(u,o(i));const{begin:c,end:f,target:h,hOffset:p}=r,d=["left","right"].includes(u)?An:$n;h&&h.attr("d",d(c,f,p)),n.links.push({...r}),l.links.push({...r}),Object.assign(r,{fromNodeId:null,target:null,toNodeId:null})}))}))}([i,e,u,a],n)}function u(t,n,e,r,i){let u={},a={...n.offset};t.call(pn().on("start",(t=>{u={x:t.x,y:t.y}})).on("drag",(e=>{n.offset.x=a.x+e.x-u.x,n.offset.y=a.y+e.y-u.y;const{offset:s,pos:l,width:c,height:f}=n;t.style("transform",`translate(${l.x+s.x-c/2-r}px,${l.y+s.y-f/2-i}px)`),function(t,n,e){const{nodeId:r,links:i,offset:u,pos:a,width:s,height:l}=t;i.forEach((t=>{const{beginPosName:i,fromNodeId:c,toNodeId:f,target:h,hOffset:p}=t;let d=0,g=0,y=0,m=0;if(c===r){const{offset:r,pos:c,width:h,height:p}=o(f);"bottom"===i?(d=l/2,y=-p/2):(g="right"===i?s/2:-s/2,m="right"===i?h/2:-h/2),t.begin={x:a.x+u.x+g-n,y:a.y+u.y+d-e},t.end={x:c.x+r.x+m-n,y:c.y+r.y+y-e}}else{const{offset:r,pos:f,width:h,height:p}=o(c);"bottom"===i?(d=p/2,y=-l/2):(g="right"===i?h/2:-h/2,m="right"===i?s/2:-s/2),t.begin={x:f.x+r.x+g-n,y:f.y+r.y+d-e},t.end={x:a.x+u.x+m-n,y:a.y+u.y+y-e}}console.log("hOffset:",p);const v=["left","right"].includes(i)?An:$n;h.attr("d",v(t.begin,t.end,p))}))}(n,r,i)})).on("end",(()=>{a={...n.offset}})).container((()=>e)))}function a(t,n){let{pos:r,type:o,width:a,height:s,offset:l,nodeId:c}=t;l&&(t.pos={x:r.x+l.x,y:r.y+l.y}),t.nodeId=c||"xxxx-4xxx-yxxx-xxxx".replace(/[xy]/g,(function(t){const n=16*Math.random()|0;return("x"===t?n:3&n|8).toString(16)})),t.links=[],t.offset={x:0,y:0};const f=n.append("div").attr("class","flow-node").attr("id",t.nodeId),{sx:h,sy:p}=xn(),d=`translate(${r.x-a/2-h}px, ${r.y-s/2-p}px)`;var g,y;g=f,y={width:a+"px",height:s+"px",transform:d},Object.entries(y).forEach((([t,n])=>{g.style(t,n)})),"ellipse"===o?(f.append("div").attr("class","wrapper").style("clip-path","ellipse(50% 50% at 50% 50%)"),f.append("div").attr("class","content").style("clip-path","ellipse(50% 50% at 50% 50%)")):"rhombus"===o?(f.append("div").attr("class","wrapper").style("clip-path","polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%)"),f.append("div").attr("class","content").style("clip-path","polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%)")):(f.append("div").attr("class","wrapper").style("clip-path","polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%)"),f.append("div").attr("class","content").style("clip-path","polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%)")),e.push(t),u(f,t,n,h,p),i(f,t)}return v((()=>{Jt(".flow-wrapper>.left").selectAll("svg").data(n).join("svg").each((function(t,n){let e=null,r={};const o=Jt(this);o.call(pn().container((()=>Jt(".flow-wrapper"))).on("drag",(t=>{const{x:n,y:o}=r;e.style("transform",`translate(${t.x-n}px,${t.y-o}px)`)})).on("start",(t=>{r={x:t.x,y:t.y},e=o.clone(!0),e.style("position","absolute").style("top",50*n+"px")})).on("end",(n=>{e.remove();const r=Jt(".flow-wrapper>.right"),{x:o,y:i,width:u,height:s}=r.node().getBoundingClientRect();if(n.x<o||n.x>o+u||n.y<i||n.y>i+s)return;const l={x:n.x-o,y:n.y-i};a({...t,pos:l},r)})))}))})),[n]}class Nn extends z{constructor(t){super(),L(this,t,En,wn,i,{})}}function Sn(t){let n,e,r,o,i,c,d,y;return d=new Nn({}),{c(){n=l("main"),e=l("h1"),r=f("Hello "),o=f(t[0]),i=f("!"),c=h(),B(d.$$.fragment),p(e,"class","svelte-t794sh"),p(n,"class","svelte-t794sh")},m(t,s){a(t,n,s),u(n,e),u(e,r),u(e,o),u(e,i),u(n,c),T(d,n,null),y=!0},p(t,[n]){(!y||1&n)&&g(o,t[0])},i(t){y||(O(d.$$.fragment,t),y=!0)},o(t){P(d.$$.fragment,t),y=!1},d(t){t&&s(n),j(d)}}}function kn(t,n,e){let{name:r}=n;return t.$$set=t=>{"name"in t&&e(0,r=t.name)},[r]}return new class extends z{constructor(t){super(),L(this,t,kn,Sn,i,{name:0})}}({target:document.body,props:{name:"Svelte"}})}();
//# sourceMappingURL=bundle.js.map
